---
import Layout from '~/layouts/PageLayout.astro';
import StructuredData from '~/components/common/StructuredData.astro';

import Hero from '~/components/widgets/Hero.astro';
import Note from '~/components/widgets/Note.astro';
import Features from '~/components/widgets/Features.astro';
import Features2 from '~/components/widgets/Features2.astro';
import Content from '~/components/widgets/Content.astro';
import BlogLatestPosts from '~/components/widgets/BlogLatestPosts.astro';
import Stats from '~/components/widgets/Stats.astro';
import CallToAction from '~/components/widgets/CallToAction.astro';
import Testimonials from '~/components/widgets/Testimonials.astro';
import { getCommunityStats, formatContributions } from '~/utils/openCollective';

const stats = await getCommunityStats();

const metadata = {
  title: 'Mage-OS | Community-Driven Open Source Commerce Platform',
  description:
    'Mage-OS is a community-owned, open-source ecommerce platform built on Magento Open Source. Experience innovation, independence, and enterprise-grade performance.',
  ignoreTitleTemplate: true,
};
---

<Layout metadata={metadata}>
  <!-- Structured Data for SEO -->
  <StructuredData type="Organization" />
  <StructuredData type="WebSite" />

  <!-- Hero Widget ******************* -->

  <Hero
    actions={[
      {
        variant: 'primary',
        text: 'Download Mage-OS',
        href: '/get-started/quick-start',
        icon: 'tabler:download',
      },
      { text: 'View Features', href: '/product/features', icon: 'tabler:list-check' },
    ]}
  >
    <Fragment slot="title">
      The <span class="text-accent dark:text-white">Community-Driven</span><br />
      Open Source Commerce Platform
    </Fragment>

    <Fragment slot="subtitle">
      <span class="font-semibold">Mage-OS</span> is a community-owned, open-source ecommerce platform built on Magento Open
      Source. Experience innovation, independence, and enterprise-grade performance with seamless migration.
    </Fragment>
  </Hero>

  <!-- Note Widget ******************* -->

  <Note
    title="100% Community-Owned"
    description="Built by merchants, developers, and agencies worldwide. No shareholders, no investorsâ€”just the community."
  />

  <!-- Latest News Widget ******* -->

  <BlogLatestPosts
    title="Latest News & Updates"
    information={`Stay up to date with the latest Mage-OS releases, community events, and ecosystem news.`}
    count={3}
  >
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-slate-50 dark:bg-slate-800/50"></div>
    </Fragment>
  </BlogLatestPosts>

  <!-- Features Widget *************** -->

  <Features
    id="features"
    tagline="Why Choose Mage-OS"
    title="Complete Capabilities, Community-Driven Innovation"
    subtitle="Mage-OS Distribution delivers the performance, security, and flexibility that companies rely on, with the transparency and agility only true open source provides."
    items={[
      {
        title: 'Innovation Without Compromise',
        description:
          "Mage-OS builds on Magento Open Source's proven foundation while introducing performance enhancements, security improvements, and cutting-edge features driven by real-world needs.",
        icon: 'tabler:rocket',
      },
      {
        title: 'Seamless Migration',
        description:
          'Migrate from Magento Open Source in minutes with full upstream compatibility. No vendor lock-in. No complexity. Just powerful commerce you control.',
        icon: 'tabler:refresh',
      },
      {
        title: 'Excellent Performance',
        description:
          'Lightweight by design, optimized for speed, and ready to scale from SMB to enterprise without compromise.',
        icon: 'tabler:bolt',
      },
      {
        title: 'Enhanced Security',
        description:
          'Built on the latest Magento security patches with proactive community-driven improvements and faster patch cycles.',
        icon: 'tabler:shield-check',
      },
      {
        title: 'Upstream Compatible',
        description:
          '100% compatible with existing Magento 2 extensions and integrations. Your ecosystem stays intact.',
        icon: 'tabler:plug-connected',
      },
      {
        title: 'Transparent Governance',
        description:
          'Community-led development, transparent roadmaps, and open governance ensure Mage-OS evolves to meet your business needs.',
        icon: 'tabler:users',
      },
    ]}
  />

  <!-- Content Widget **************** -->

  <Content
    isReversed
    tagline="The Mage-OS Distribution"
    title="Built on Magento, Enhanced by Community"
    items={[
      {
        title: 'Based on Magento 2.4.8-p3',
        description:
          'Built on the rock-solid Magento foundation with all the latest security fixes and platform improvements.',
      },
      {
        title: 'Community-Driven Features',
        description:
          'Innovations from the Mage-OS Lab including PCI DSS 4.0 compliance, AI-powered translation, and performance optimization.',
      },
      {
        title: 'Developer-Friendly',
        description:
          'Accessible contribution pathways, comprehensive documentation, and active community support empower developers at every level.',
      },
    ]}
    image={{
      src: 'https://images.unsplash.com/photo-1519389950473-47ba0277781c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80',
      alt: 'Mage-OS Development',
    }}
  >
    <Fragment slot="content">
      <h3 class="text-2xl font-bold tracking-tight dark:text-white sm:text-3xl mb-2">
        Open Source Commerce, Reimagined
      </h3>
      The Mage-OS Distribution delivers everything you need to run a successful online store.
    </Fragment>

    <Fragment slot="bg">
      <div class="absolute inset-0 bg-orange-50 dark:bg-transparent"></div>
    </Fragment>
  </Content>

  <!-- Stats Widget ****************** -->

  <Stats
    stats={[
      { title: 'Financial Contributors', amount: `${stats.totalContributors}+` },
      { title: 'Total Contributions', amount: formatContributions(stats.totalContributions) },
      { title: 'Community Members', amount: `${stats.communityMembers}+` },
      { title: 'Professional Members', amount: `${stats.professionalMembers}+` },
    ]}
  >
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
    </Fragment>
  </Stats>

  <!-- Testimonials Widget *********** -->

  <Testimonials
    title="Trusted by Leading Brands & Agencies"
    testimonials={[
      {
        testimonial: `Collaborating closely with Mage-OS is not just about securing our clients' future; it's about actively shaping it, contributing to making Mage-OS even better.`,
        name: 'Ignacio Riesco',
        job: 'CEO, Interactiv4',
      },
      {
        testimonial: `Making the decision to sponsor Mage-OS and become a gold partner was the easiest decision we've made. We are very excited for the future of the Magento platform.`,
        name: 'Arron Moss',
        job: 'Co-founder, MDOQ',
      },
      {
        testimonial: `Mage-OS represents the future of open-source ecommerce. The community-driven approach ensures the platform evolves based on real merchant and developer needs, not just corporate priorities.`,
        name: 'Vinai Kopp',
        job: 'Mage-OS Founding Member',
      },
    ]}
  />

  <!-- Community Section ************* -->

  <Features2
    title="Join the Community"
    subtitle="There are many ways to get involved with Mage-OS, regardless of your experience level"
    tagline="Get Involved"
    columns={4}
    items={[
      {
        title: 'Contribute Code',
        description: 'Submit pull requests for bug fixes, new features, or performance improvements on GitHub.',
        icon: 'tabler:code',
      },
      {
        title: 'Join Discord',
        description:
          'Connect with developers and merchants in real-time. Weekly tech meetings every Tuesday at 3 PM CET.',
        icon: 'tabler:brand-discord',
      },
      {
        title: 'Become a Member',
        description: 'Support the project financially and gain voting rights in our democratic governance.',
        icon: 'tabler:users',
      },
      {
        title: 'Attend Events',
        description: 'Meet us at Meet Magento events worldwide and local community gatherings.',
        icon: 'tabler:calendar-event',
      },
    ]}
  >
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-orange-50 dark:bg-transparent"></div>
    </Fragment>
  </Features2>

  <!-- CallToAction Widget *********** -->

  <CallToAction
    actions={[
      {
        variant: 'primary',
        text: 'Get Started',
        href: '/get-started/quick-start',
        icon: 'tabler:download',
      },
      {
        text: 'Join the Community',
        href: '/community',
      },
    ]}
  >
    <Fragment slot="title">
      Ready to take control of your<br class="block sm:hidden" /><span class="sm:whitespace-nowrap">
        commerce future?</span
      >
    </Fragment>

    <Fragment slot="subtitle">
      Download Mage-OS today and join the many merchants and developers building the future of open-source ecommerce.
    </Fragment>
  </CallToAction>
</Layout>
