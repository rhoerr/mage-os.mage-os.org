---
import Layout from '~/layouts/PageLayout.astro';
import PageHero from '~/components/widgets/PageHero.astro';
import Note from '~/components/widgets/Note.astro';
import Features from '~/components/widgets/Features.astro';
import Features2 from '~/components/widgets/Features2.astro';
import Steps from '~/components/widgets/Steps.astro';
import FAQs from '~/components/widgets/FAQs.astro';
import CallToAction from '~/components/widgets/CallToAction.astro';
import Newsletter from '~/components/widgets/Newsletter.astro';
import WidgetWrapper from '~/components/ui/WidgetWrapper.astro';
import Headline from '~/components/ui/Headline.astro';
import Button from '~/components/ui/Button.astro';

const metadata = {
  title: 'Contact | Mage-OS',
  description:
    'Get in touch with the Mage-OS community. Connect via Discord for real-time support, report issues on GitHub, attend weekly meetings, or reach us by email for partnership inquiries.',
  openGraph: {
    images: [{ url: '/og/page/contact.png', width: 1200, height: 630 }],
  },
};
---

<Layout metadata={metadata}>
  <!-- Hero Widget ******************* -->

  <PageHero
    tagline="Contact"
    variant="split"
    actions={[
      {
        variant: 'primary',
        text: 'Join Discord',
        href: '/discord-channel',
        target: '_blank',
        icon: 'tabler:brand-discord',
      },
      {
        text: 'View GitHub',
        href: 'https://github.com/mage-os',
        target: '_blank',
        icon: 'tabler:brand-github',
      },
    ]}
    image={{
      src: 'https://images.unsplash.com/photo-1521737711867-e3b97375f902?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80',
      alt: 'Friendly team meeting in a casual workspace environment',
    }}
  >
    <Fragment slot="title">
      Let's Connect! <span class="text-accent dark:text-white">We're Here to Help</span>
    </Fragment>

    <Fragment slot="subtitle">
      Whether you need technical support, want to contribute to the project, or have partnership inquiries, we have the
      right channel for you. Our community is welcoming, responsive, and eager to help.
    </Fragment>
  </PageHero>

  <!-- Note Widget: Discord Emphasis ******************* -->

  <Note
    title="Discord is Our Primary Support Channel"
    description="For the fastest response, join our Discord server. Active community members and contributors are ready to assist you with installation, migration, development questions, and more."
    icon="tabler:brand-discord"
    callToAction={{ text: 'Join Discord', href: '/discord-channel' }}
  />

  <!-- Steps Widget: Response Expectations ****************** -->

  <Steps
    title="What to Expect"
    tagline="Response Times"
    subtitle="Choose the right channel based on your needs and expected response time"
    items={[
      {
        title: 'Discord: <span class="font-medium">Minutes to Hours</span>',
        description:
          'Real-time chat with community members. Best for technical questions, installation help, and general discussion. Most active during European and US business hours.',
        icon: 'tabler:message-2',
      },
      {
        title: 'GitHub Issues: <span class="font-medium">1-3 Days</span>',
        description:
          'For bug reports and feature requests. Our development team reviews all submissions and prioritizes based on impact and community feedback.',
        icon: 'tabler:bug',
      },
      {
        title: 'Email: <span class="font-medium">2-3 Business Days</span>',
        description:
          'For partnership inquiries, sponsorship opportunities, press, and official association matters. Contact us at info@mage-os.org.',
        icon: 'tabler:mail',
      },
      {
        title: 'Weekly Tech Meeting: <span class="font-medium">Every Tuesday</span>',
        description:
          'Join us at 3 PM CET (9 AM EST) on Discord. Discuss development progress, ask questions directly, and meet the core team. Everyone is welcome!',
        icon: 'tabler:calendar-event',
      },
    ]}
  />

  <!-- Features Widget: Contact Channels *************** -->

  <Features
    tagline="Contact Channels"
    title="Choose Your Contact Method"
    subtitle="Different inquiries need different channels. Find the right way to reach us based on your needs."
    columns={3}
    items={[
      {
        title: 'Community Support',
        description:
          'Get real-time help with Mage-OS installation, migration, development questions, and general discussion. Our most active support channel.',
        icon: 'tabler:brand-discord',
        callToAction: {
          text: 'Join Discord',
          href: '/discord-channel',
          target: '_blank',
        },
      },
      {
        title: 'Bug Reports & Features',
        description:
          'Found a bug or have a feature request? Open an issue on GitHub with reproduction steps and our team will review it.',
        icon: 'tabler:brand-github',
        callToAction: {
          text: 'Open Issue',
          href: 'https://github.com/mage-os/mageos-magento2/issues',
          target: '_blank',
        },
      },
      {
        title: 'Partnership & Sponsorship',
        description:
          'Interested in becoming a Mage-OS partner or sponsor? We offer Bronze, Silver, Gold, and Platinum partnership tiers.',
        icon: 'tabler:heart-handshake',
        callToAction: {
          text: 'Email Us',
          href: 'mailto:info@mage-os.org',
        },
      },
      {
        title: 'Weekly Tech Meeting',
        description:
          'Join our Tuesday meeting at 3 PM CET to discuss development, ask questions, and connect with the core team. No registration needed.',
        icon: 'tabler:calendar',
        callToAction: {
          text: 'Meeting Details',
          href: '/community',
        },
      },
      {
        title: 'Press & Media',
        description:
          'For press inquiries, interviews, or media coverage requests, contact our communications team via email.',
        icon: 'tabler:news',
        callToAction: {
          text: 'Press Contact',
          href: 'mailto:info@mage-os.org?subject=Press%20Inquiry',
        },
      },
      {
        title: 'Official Association Matters',
        description: 'For legal, governance, or official association business, reach out to our administrative team.',
        icon: 'tabler:building',
        callToAction: {
          text: 'Contact Administration',
          href: 'mailto:info@mage-os.org?subject=Official%20Inquiry',
        },
      },
    ]}
  >
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-orange-50 dark:bg-transparent"></div>
    </Fragment>
  </Features>

  <!-- Contact Form Widget ************** -->

  <WidgetWrapper id="form" containerClass="max-w-4xl mx-auto">
    <Headline
      title="Send Us a Message"
      subtitle="Need to reach us? Use this form for general inquiries. For faster support, we recommend joining our Discord community."
      tagline="Contact Form"
      classes={{
        container: 'mb-8 md:mb-10',
        title: 'text-3xl md:text-4xl font-bold tracking-tighter mb-4 font-heading',
        subtitle: 'text-xl text-muted dark:text-slate-400',
      }}
    />
    <div
      class="flex flex-col max-w-xl mx-auto rounded-lg backdrop-blur border border-gray-200 dark:border-gray-700 bg-white dark:bg-slate-900 shadow p-4 sm:p-6 lg:p-8 w-full"
    >
      <form action="https://submit-form.com/UTjOJJ3Ey" method="POST" aria-label="Contact form">
        <!-- Honeypot field for spam protection -->
        <input type="checkbox" name="_honeypot" style="display:none" tabindex="-1" autocomplete="off" />

        <div class="mb-6">
          <label for="name" class="block text-sm font-medium">
            Name
            <span class="text-red-500 ml-1" aria-hidden="true">*</span>
            <span class="sr-only">(required)</span>
          </label>
          <input
            type="text"
            id="name"
            name="name"
            required
            autocomplete="name"
            aria-required="true"
            class="py-3 px-4 block w-full text-md rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-slate-900"
            placeholder="Your name"
          />
        </div>

        <div class="mb-6">
          <label for="email" class="block text-sm font-medium">
            Email
            <span class="text-red-500 ml-1" aria-hidden="true">*</span>
            <span class="sr-only">(required)</span>
          </label>
          <input
            type="email"
            id="email"
            name="email"
            required
            autocomplete="email"
            aria-required="true"
            class="py-3 px-4 block w-full text-md rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-slate-900"
            placeholder="you@example.com"
          />
        </div>

        <div class="mb-6">
          <label for="subject" class="block text-sm font-medium"> Subject </label>
          <select
            id="subject"
            name="subject"
            class="py-3 px-4 block w-full text-md rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-slate-900"
          >
            <option value="General inquiry">General inquiry</option>
            <option value="Contributing">Contributing to Mage-OS</option>
            <option value="Technical question">Technical question</option>
            <option value="Partnership">Partnership opportunity</option>
            <option value="Other">Other</option>
          </select>
        </div>

        <div class="mb-6">
          <label for="message" class="block text-sm font-medium">
            Message
            <span class="text-red-500 ml-1" aria-hidden="true">*</span>
            <span class="sr-only">(required)</span>
          </label>
          <textarea
            id="message"
            name="message"
            rows="5"
            required
            aria-required="true"
            class="py-3 px-4 block w-full text-md rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-slate-900"
            placeholder="How can we help?"></textarea>
        </div>

        <!-- GDPR Notice -->
        <div class="mb-6 text-sm text-gray-600 dark:text-gray-400 leading-relaxed">
          <p>
            By submitting this form, you agree that we may process your information in accordance with our
            <a href="/privacy" class="text-primary hover:underline">Privacy Policy</a>. We use <a
              href="https://formspark.io/legal/privacy-policy/"
              class="text-primary hover:underline"
              target="_blank"
              rel="noopener noreferrer">Formspark</a
            >
            to process form submissions. Your data is stored in the EU.
          </p>
        </div>

        <!-- Cloudflare Turnstile -->
        <div class="mb-6">
          <div class="cf-turnstile" data-sitekey="0x4AAAAAACMKGFTo5c0cc9e8" data-theme="auto"></div>
        </div>

        <div class="grid">
          <Button variant="primary" type="submit"> Send Message </Button>
        </div>
      </form>
    </div>
    <p class="text-sm text-muted text-center mt-6">
      We typically respond to form submissions within 2-3 business days.
    </p>
  </WidgetWrapper>

  <!-- Cloudflare Turnstile Script (loaded once for the page) -->
  <script is:inline src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>

  <!-- Features2 Widget: Follow Us ************** -->

  <Features2
    title="Stay Connected"
    subtitle="Follow us on social media for the latest news, release announcements, and community highlights"
    tagline="Social Media"
    columns={4}
    items={[
      {
        title: 'LinkedIn',
        description: 'Professional updates, partnership announcements, and ecosystem news.',
        icon: 'tabler:brand-linkedin',
        callToAction: {
          text: 'Follow',
          href: 'https://www.linkedin.com/company/mage-os',
          target: '_blank',
        },
      },
      {
        title: 'Blog',
        description: 'In-depth articles, release notes, and community stories.',
        icon: 'tabler:article',
        callToAction: {
          text: 'Read Blog',
          href: '/blog',
        },
      },
    ]}
  >
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-orange-50 dark:bg-transparent"></div>
    </Fragment>
  </Features2>

  <!-- FAQs Widget ******************* -->

  <FAQs
    title="Frequently Asked Questions"
    subtitle="Quick answers to common contact questions"
    tagline="FAQs"
    items={[
      {
        title: 'What is the best way to get technical support?',
        description:
          'Discord is our primary support channel. Visit our <a href="/discord-channel" class="underline">Discord page</a> and ask in the #tech or #general channels. Community members and core contributors actively help answer questions.',
      },
      {
        title: 'How do I report a security vulnerability?',
        description:
          'For security issues, please email security@mage-os.org directly instead of opening a public GitHub issue. We take security seriously and will respond promptly to investigate and address vulnerabilities.',
      },
      {
        title: 'Can I schedule a call with the Mage-OS team?',
        description:
          'For partnership discussions or sponsorship inquiries, email info@mage-os.org to schedule a call. For general questions, the weekly Tuesday tech meeting is a great opportunity to speak with core team members directly.',
      },
      {
        title: 'How can I contribute to Mage-OS?',
        description:
          'There are many ways to contribute: submit code on GitHub, help with documentation, test new releases, participate in discussions on Discord, or become a financial supporter. Visit our Community page to learn more.',
      },
      {
        title: 'Where can I find the association address?',
        description:
          'The Mage-OS Association is registered in Poland at Jeżycka 39 / 56, 60-864 Poznań, Poland. For legal correspondence, please use this address or email board@mage-os.org.',
      },
    ]}
  />

  <!-- Newsletter Widget ************** -->

  <Newsletter
    id="newsletter"
    title="Subscribe to Our Newsletter"
    subtitle="Stay up to date with Mage-OS releases, community news, and upcoming events. We send occasional updates—no spam, ever."
    tagline="Newsletter"
  >
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-[#f6f6f6] dark:bg-transparent"></div>
    </Fragment>
  </Newsletter>

  <!-- CallToAction Widget *********** -->

  <CallToAction
    actions={[
      {
        variant: 'primary',
        text: 'Join Discord',
        href: '/discord-channel',
        target: '_blank',
        icon: 'tabler:brand-discord',
      },
      {
        text: 'Become a Member',
        href: 'https://opencollective.com/mage-os',
        target: '_blank',
        icon: 'tabler:heart',
      },
      {
        text: 'Get Involved',
        href: '/community',
      },
    ]}
  >
    <Fragment slot="title"> Ready to Join the Community? </Fragment>

    <Fragment slot="subtitle">
      Beyond just asking questions, become part of a global community building the future of open-source ecommerce.
      Whether you contribute code, documentation, ideas, or financial support—<strong>every contribution matters</strong
      >.
    </Fragment>
  </CallToAction>
</Layout>
